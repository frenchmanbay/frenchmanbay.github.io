define(["designer/util/util.instances","designer/util/util.model","jquery","wsbcore/helper","designer/util/facebookSDKHelper"],function(e,t,a,s,o){function i(e,a){this.$element=e,this.model=new t(a),this.mode=this.model.get("mode"),this.subscriptions=[],this.init()}var r="wsb-social-share";i.prototype={init:function(){var e=this;if("designer"===this.mode&&this.model.isKO){var t=this.model.get();if(t.mutatorViewModel){var a=function(){e.refresh()};for(var s in t.mutatorViewModel)t.ko.isObservable(t.mutatorViewModel[s])&&this.subscriptions.push(t.mutatorViewModel[s].subscribe(a))}}this.refresh(!0)},ready:function(e){var t=this,o=function(){"designer"===t.mode&&t.model.isKO&&require(["/i18n/resources/client","wsbcore/growl"],function(e){a("<div></div>").sfGrowl({title:e.resources.Client__Designer__Yikes_hit_a_snag,content:e.resources.Server__There_has_been_an_unexpected_error,icon:"error"})}),t.destroy()};s.require(["js!//s7.addthis.com/js/300/addthis_widget.js#async=1"],function(){function a(){1>--i&&(clearInterval(s),o())}var s,i=20;s=setInterval(function(){window&&window.addthis&&window.addthis.init?(window.addthis.init(),window.addthis.toolbox(t.$element[0]),"designer"===t.mode&&t.updateOverlay(e)):a()},100)},o)},refresh:function(e){var t=this;this.$element.attr("class",r).children().remove();var s="",i=r+"-button",l=this.model.get("ShareTheme");if("mobile"===this.mode)switch(l){case"Small Buttons":case"Small Buttons - Vertical":case"Buttons - Vertical":l="Buttons";break;case"Counter":case"Counter - Vertical":case"Horizontal Counter":case"Bubble Counter - Vertical":case"Vertical Counter":l="Bubble Counter"}switch(Boolean(l.match(/- Vertical$/i))&&(i+="-vert"),l){case"Buttons":case"Buttons - Vertical":this.$element.addClass("addthis_toolbox addthis_default_style addthis_32x32_style"),this.model.get("ShareFacebook")&&(s+='<a class="addthis_button_facebook '+i+'"></a>'),this.model.get("ShareTwitter")&&(s+='<a class="addthis_button_twitter '+i+'"></a>'),this.model.get("ShareGoogle")&&(s+='<a class="addthis_button_google_plusone_share '+i+'"></a>'),this.model.get("SharePinterest")&&(s+='<a class="addthis_button_pinterest_share '+i+'"></a>'),this.model.get("ShareEmail")&&(s+='<a class="addthis_button_email '+i+'"></a>'),this.model.get("ShareMore")&&(s+='<a class="addthis_button_expanded '+i+'"></a>');break;case"Small Buttons":case"Small Buttons - Vertical":this.$element.addClass("addthis_toolbox addthis_default_style"),this.model.get("ShareFacebook")&&(s+='<a class="addthis_button_facebook '+i+'"></a>'),this.model.get("ShareTwitter")&&(s+='<a class="addthis_button_twitter '+i+'"></a>'),this.model.get("ShareGoogle")&&(s+='<a class="addthis_button_google_plusone_share '+i+'"></a>'),this.model.get("SharePinterest")&&(s+='<a class="addthis_button_pinterest_share '+i+'"></a>'),this.model.get("ShareEmail")&&(s+='<a class="addthis_button_email '+i+'"></a>'),this.model.get("ShareMore")&&(s+='<a class="addthis_button_expanded '+i+'"></a>');break;case"Toolbar":s+='<a class="addthis_button" href="//web.archive.org/web/20180113223547/https://www.addthis.com/bookmark.php?v=300&amp;pubid=xa-5107daf277cd4d0c"><img src="//web.archive.org/web/20180113223547/https://s7.addthis.com/static/btn/v2/lg-share-en.gif" width="125" height="16" alt="Bookmark and Share" style="border:0"/></a>';break;default:case"Counter":case"Counter - Vertical":case"Horizontal Counter":this.$element.addClass("addthis_toolbox addthis_default_style"),this.model.get("ShareFacebook")&&(s+='<a class="addthis_button_facebook_like '+i+'" fb:like:layout="button_count"></a>'),this.model.get("ShareTwitter")&&(s+='<a class="addthis_button_tweet '+i+'"></a>'),this.model.get("ShareGoogle")&&(s+='<a class="addthis_button_google_plusone '+i+'" g:plusone:size="medium"></a>');break;case"Bubble Counter":case"Bubble Counter - Vertical":case"Vertical Counter":this.$element.addClass("addthis_toolbox addthis_default_style addthis_counter_style"),this.model.get("ShareFacebook")&&(s+='<a class="addthis_button_facebook_like '+i+'" fb:like:layout="box_count"></a>'),this.model.get("ShareTwitter")&&(s+='<a class="addthis_button_tweet '+i+'" tw:count="vertical"></a>'),this.model.get("ShareGoogle")&&(s+='<a class="addthis_button_google_plusone '+i+'" g:plusone:size="tall"></a>')}this.$element.html(s),"object"!=typeof window.addthis?a(document).ready(function(){t.ready(e)}):t.ready(e);var d=this.model.get("FacebookUrl"),n={"class":"fb-page","data-href":d};o.likeBoxGenerator(this.$element,n)},updateOverlay:function(e){if(!e&&this.model.isKO){var t=this;clearInterval(this.overlayTimer),this.overlayTimerCount=0,this.overlayTimer=setInterval(function(){if(t.overlayTimerCount>=20)clearInterval(t.overlayTimer),t.overlayTimerCount=0;else{t.overlayTimerCount++,t.$element.removeClass("resized");var e=t.model.get("getLast",!0);if(!(e instanceof Function))return;if(!t.model.model||!t.model.model.undoer)return;var a=t.model.model.undoer,s=!a.getCurrentState().isCollect;if(s){var o=t.model.get("getLast",!0)("Width"),i=t.model.get("getLast",!0)("Height");if(parseFloat((o&&o.NewValue||t.model.get("Width")).replace("px",""))<t.$element.outerWidth(!0)){a.disable();var r=t.$element.outerWidth(!0)+"px";o&&(o.NewValue=r),t.model.set("Width",r),a.enable()}if(parseFloat((i&&i.NewValue||t.model.get("Height")).replace("px",""))<t.$element.outerHeight(!0)){a.disable();var l=t.$element.outerHeight(!0)+"px";i&&(i.NewValue=l),t.model.set("Height",l),a.enable()}}else parseFloat(t.model.get("Width").replace("px",""))<t.$element.outerWidth(!0)&&t.model.set("Width",t.$element.outerWidth(!0)+"px"),parseFloat(t.model.get("Height").replace("px",""))<t.$element.outerHeight(!0)&&t.model.set("Height",t.$element.outerHeight(!0)+"px");t.$element.addClass("resized")}},100)}},destroy:function(){for(var e in this.subscriptions)this.subscriptions[e].dispose();l.destroy(this.$element),this.$element.remove()}};var l=new e(r,i);return{render:function(e,t){var a=l.get(e);return a?a.refresh():a=l.create(e,t),a},destroy:function(e){var t=l.get(e);return t?(l.destroy(e),!0):!1}}});
//# sourceMappingURL=social.share.js.map
/*
     FILE ARCHIVED ON 22:35:47 Jan 13, 2018 AND RETRIEVED FROM THE
     INTERNET ARCHIVE ON 03:32:19 Jan 07, 2019.
     JAVASCRIPT APPENDED BY WAYBACK MACHINE, COPYRIGHT INTERNET ARCHIVE.

     ALL OTHER CONTENT MAY ALSO BE PROTECTED BY COPYRIGHT (17 U.S.C.
     SECTION 108(a)(3)).
*/
/*
playback timings (ms):
  LoadShardBlock: 55.702 (3)
  esindex: 0.007
  captures_list: 74.709
  CDXLines.iter: 13.668 (3)
  PetaboxLoader3.datanode: 118.127 (5)
  exclusion.robots: 0.171
  exclusion.robots.policy: 0.16
  RedisCDXSource: 1.744
  PetaboxLoader3.resolve: 41.735 (2)
  load_resource: 143.796
*/